<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parada Carioca - Delivery</title>
<style>
  :root {
    --primary: #ff7b00;
    --accent: #ffc107;
    --text: #111;
    --bg: #fff;
  }
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: var(--bg);
    color: var(--text);
  }
  header {
    background: var(--primary);
    color: #fff;
    padding: 1rem;
    text-align: center;
    font-size: 1.5rem;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  .container {
    padding: 1rem;
    max-width: 800px;
    margin: auto;
  }
  section {
    margin-bottom: 2rem;
  }
  h2 {
    border-left: 6px solid var(--primary);
    padding-left: .5rem;
    color: var(--primary);
  }
  .item {
    border: 1px solid #ddd;
    padding: .75rem;
    border-radius: .75rem;
    margin: .5rem 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fffaf5;
  }
  button {
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: .5rem;
    padding: .4rem .8rem;
    cursor: pointer;
  }
  button:hover {
    background: #e86a00;
  }
  input, select {
    padding: .5rem;
    border: 1px solid #ccc;
    border-radius: .5rem;
    width: 100%;
    margin-bottom: .5rem;
  }
  .total {
    font-size: 1.2rem;
    font-weight: bold;
  }
  .promo {
    background: var(--accent);
    color: #000;
    padding: .8rem;
    text-align: center;
    border-radius: .5rem;
    margin-bottom: 1rem;
    font-weight: 600;
  }
</style>
</head>
<body>
<header>üçî Parada Carioca Delivery</header>

<div class="container">
  <section id="localizacao">
    <h2>üìç Localiza√ß√£o</h2>
    <p>Digite seu CEP ou use o GPS para escolher a loja mais pr√≥xima:</p>
    <input type="text" id="cep" placeholder="Digite seu CEP">
    <button onclick="buscarLoja()">Localizar</button>
    <button onclick="usarGPS()">Usar GPS</button>
    <p id="lojaEscolhida"></p>
  </section>

  <div class="promo">üî• Promo√ß√£o de Segunda a Quarta: 2x Xtudo + 2x Guaracamp por R$25!</div>

  <section id="cardapio">
    <h2>üçî Lanches</h2>
    <div class="item"><span>Xtudo</span> <span>R$14,00 <button onclick="add('Xtudo',14)">+</button></span></div>
    <div class="item"><span>X-Bacon</span> <span>R$12,00 <button onclick="add('X-Bacon',12)">+</button></span></div>
    <div class="item"><span>X-Burg</span> <span>R$10,00 <button onclick="add('X-Burg',10)">+</button></span></div>
    <div class="item"><span>X-Salada</span> <span>R$11,00 <button onclick="add('X-Salada',11)">+</button></span></div>

    <h2>ü•§ Bebidas</h2>
    <div class="item"><span>Coca-Cola 350ml</span> <span>R$5,00 <button onclick="add('Coca-Cola 350ml',5)">+</button></span></div>
    <div class="item"><span>Guaran√° Antarctica 350ml</span> <span>R$4,50 <button onclick="add('Guaran√° Antarctica 350ml',4.5)">+</button></span></div>
    <div class="item"><span>Guaracamp 350ml</span> <span>R$3,50 <button onclick="add('Guaracamp 350ml',3.5)">+</button></span></div>
    <div class="item"><span>√Ågua 500ml</span> <span>R$3,00 <button onclick="add('√Ågua 500ml',3)">+</button></span></div>

    <h2>üç≤ Caldos</h2>
    <div class="item"><span>Caldo Verde</span> <span>R$9,00 <button onclick="add('Caldo Verde',9)">+</button></span></div>
    <div class="item"><span>Mocot√≥</span> <span>R$10,00 <button onclick="add('Mocot√≥',10)">+</button></span></div>
    <div class="item"><span>Ervilha</span> <span>R$9,00 <button onclick="add('Ervilha',9)">+</button></span></div>
  </section>

  <section id="pedido">
    <h2>üõí Seu Pedido</h2>
    <ul id="lista"></ul>
    <p><strong>Total:</strong> R$ <span id="total">0.00</span></p>
    <input type="text" id="cupom" placeholder="Cupom (opcional)">
    <select id="entrega">
      <option value="loja">Comer na loja</option>
      <option value="entrega">Entrega</option>
    </select>
    <p>M√©todo de pagamento:</p>
    <select id="pagamento">
      <option value="cartao">Cart√£o (cr√©dito/d√©bito)</option>
      <option value="pix">Pix na entrega</option>
      <option value="pixwpp">Pix via WhatsApp</option>
    </select>
    <button onclick="finalizar()">Enviar Pedido via WhatsApp</button>
  </section>
</div>

<script>
let carrinho = [];
let loja = {};
const lojas = [
  {nome: 'Loja 1 - Parada Carioca', cep: '23056030', tel: '5521991166886', lat: -22.877, lon: -43.580},
  {nome: 'Loja 2 - Projetada Cinco', cep: '23055000', tel: '5521999999999', lat: -22.870, lon: -43.570}
];

function add(nome, preco) {
  carrinho.push({nome, preco});
  render();
}

function render() {
  const lista = document.getElementById('lista');
  lista.innerHTML = '';
  let total = 0;
  carrinho.forEach(item => {
    total += item.preco;
    lista.innerHTML += `<li>${item.nome} - R$${item.preco.toFixed(2)}</li>`;
  });

  // Promo√ß√£o de 2x Xtudo + 2x Guaracamp
  const dia = new Date().getDay(); // 1=Seg, 2=Ter, 3=Qua
  if ([1,2,3].includes(dia)) {
    const qtdXtudo = carrinho.filter(i=>i.nome==='Xtudo').length;
    const qtdGuaracamp = carrinho.filter(i=>i.nome==='Guaracamp 350ml').length;
    const combos = Math.min(Math.floor(qtdXtudo/2), Math.floor(qtdGuaracamp/2));
    if (combos>0) {
      const desconto = (qtdXtudo*14 + qtdGuaracamp*3.5) - 25*combos;
      total -= desconto;
    }
  }

  document.getElementById('total').textContent = total.toFixed(2);
}

function buscarLoja() {
  const cep = document.getElementById('cep').value.replace(/\D/g,'');
  if (!cep) return alert('Digite um CEP v√°lido');
  fetch(`https://viacep.com.br/ws/${cep}/json/`)
    .then(r=>r.json())
    .then(d=>{
      if(d.erro) return alert('CEP n√£o encontrado');
      // Simula dist√¢ncia por diferen√ßa de CEP
      const dist1 = Math.abs(cep - lojas[0].cep);
      const dist2 = Math.abs(cep - lojas[1].cep);
      loja = dist1 < dist2 ? lojas[0] : lojas[1];
      document.getElementById('lojaEscolhida').textContent = `‚úÖ ${loja.nome}`;
    });
}

function usarGPS() {
  navigator.geolocation.getCurrentPosition(pos=>{
    const {latitude, longitude} = pos.coords;
    const dist1 = Math.hypot(latitude - lojas[0].lat, longitude - lojas[0].lon);
    const dist2 = Math.hypot(latitude - lojas[1].lat, longitude - lojas[1].lon);
    loja = dist1 < dist2 ? lojas[0] : lojas[1];
    document.getElementById('lojaEscolhida').textContent = `‚úÖ ${loja.nome}`;
  });
}

function finalizar() {
  if (!loja.tel) return alert('Escolha sua loja primeiro');
  let msg = `*Pedido Parada Carioca*\n\n`;
  carrinho.forEach(i=> msg += `${i.nome} - R$${i.preco.toFixed(2)}\n`);
  msg += `\nTotal: R$${document.getElementById('total').textContent}\n`;
  msg += `Pagamento: ${document.getElementById('pagamento').value}\n`;
  msg += `Modo: ${document.getElementById('entrega').value}\n`;
  const cupom = document.getElementById('cupom').value;
  if (cupom) msg += `Cupom: ${cupom}\n`;
  const url = `https://wa.me/${loja.tel}?text=${encodeURIComponent(msg)}`;
  window.open(url, '_blank');
}
</script>
</body>
</html>
