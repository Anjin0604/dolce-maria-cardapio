<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WealthFlow - Suas Metas Financeiras</title>
    <style>
        :root {
            --primary: #6C63FF;
            --primary-dark: #5A52D5;
            --secondary: #4CC9F0;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --dark: #121212;
            --dark-light: #1E1E1E;
            --dark-lighter: #2D2D2D;
            --text: #E0E0E0;
            --text-muted: #AAAAAA;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--dark);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--dark-light);
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 100;
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--dark-lighter);
            margin-bottom: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            font-size: 28px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: var(--text);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }

        .nav-link:hover, .nav-link.active {
            background-color: var(--dark-lighter);
            border-left-color: var(--primary);
            color: var(--primary);
        }

        .nav-icon {
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--dark-lighter);
        }

        .page-title {
            font-size: 28px;
            font-weight: 600;
        }

        .user-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        /* Content Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background-color: var(--dark-light);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 18px;
            transition: color 0.3s;
        }

        .icon-btn:hover {
            color: var(--text);
        }

        /* Progress Bar */
        .progress-container {
            margin: 15px 0;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--dark-lighter);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background-color: var(--dark-lighter);
            border: 1px solid var(--dark-lighter);
            border-radius: 8px;
            color: var(--text);
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--dark-light);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 22px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: var(--text);
        }

        /* Onboarding */
        .onboarding {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
        }

        .onboarding-slide {
            max-width: 600px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .onboarding-slide.active {
            display: block;
        }

        .onboarding-icon {
            font-size: 80px;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .onboarding-title {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .onboarding-description {
            font-size: 18px;
            color: var(--text-muted);
            margin-bottom: 30px;
        }

        .onboarding-indicators {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--dark-lighter);
            transition: background-color 0.3s;
        }

        .indicator.active {
            background-color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                width: 280px;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: block;
            }
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text);
            font-size: 24px;
            cursor: pointer;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-icon {
            font-size: 60px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Chart */
        .chart-container {
            height: 300px;
            margin: 20px 0;
        }

        /* Challenge Cards */
        .challenge-card {
            position: relative;
            padding-bottom: 70px;
        }

        .challenge-actions {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
        }

        /* Journey */
        .journey-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background-color: var(--dark-lighter);
            border-radius: 8px;
            margin-bottom: 10px;
            transition: background-color 0.3s;
        }

        .journey-item.completed {
            background-color: rgba(76, 175, 80, 0.1);
        }

        .journey-checkbox {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--text-muted);
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .journey-item.completed .journey-checkbox {
            background-color: var(--success);
            border-color: var(--success);
        }

        .journey-checkmark {
            color: white;
            font-size: 14px;
            display: none;
        }

        .journey-item.completed .journey-checkmark {
            display: block;
        }

        .journey-content {
            flex: 1;
        }

        .journey-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .journey-description {
            font-size: 14px;
            color: var(--text-muted);
        }

        /* AI Suggestions */
        .ai-suggestion {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            color: white;
        }

        .suggestion-icon {
            font-size: 24px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- Onboarding -->
    <div class="onboarding" id="onboarding">
        <div class="onboarding-slide active" id="onboarding-1">
            <div class="onboarding-icon">üí∞</div>
            <h2 class="onboarding-title">Bem-vindo ao WealthFlow</h2>
            <p class="onboarding-description">Transforme seus sonhos em realidade financeira com planejamento e educa√ß√£o</p>
        </div>
        
        <div class="onboarding-slide" id="onboarding-2">
            <div class="onboarding-icon">üéØ</div>
            <h2 class="onboarding-title">Defina suas metas</h2>
            <p class="onboarding-description">Crie sonhos financeiros, acompanhe o progresso e veja suas conquistas</p>
        </div>
        
        <div class="onboarding-slide" id="onboarding-3">
            <div class="onboarding-icon">üìà</div>
            <h2 class="onboarding-title">Simule investimentos</h2>
            <p class="onboarding-description">Use nosso simulador para projetar seus ganhos com investimentos seguros</p>
        </div>
        
        <div class="onboarding-indicators">
            <div class="indicator active"></div>
            <div class="indicator"></div>
            <div class="indicator"></div>
        </div>
        
        <div class="user-actions">
            <button class="btn btn-outline" id="skip-onboarding">Pular</button>
            <button class="btn btn-primary" id="next-onboarding">Pr√≥ximo</button>
        </div>
    </div>

    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üí∞</span>
                    <span>WealthFlow</span>
                </div>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-section="home">
                        <span class="nav-icon">üè†</span>
                        <span>In√≠cio</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="sonhos">
                        <span class="nav-icon">üéØ</span>
                        <span>Meus Sonhos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="simulador">
                        <span class="nav-icon">üìà</span>
                        <span>Simulador</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="desafios">
                        <span class="nav-icon">üî•</span>
                        <span>Desafios</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="jornada">
                        <span class="nav-icon">üìö</span>
                        <span>Jornada</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="configuracoes">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Configura√ß√µes</span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <button class="menu-toggle" id="menu-toggle">‚ò∞</button>
                <h1 class="page-title" id="page-title">In√≠cio</h1>
                <div class="user-actions">
                    <button class="btn btn-outline" id="backup-btn">
                        <span>üì•</span>
                        <span>Backup</span>
                    </button>
                    <button class="btn btn-primary" id="add-sonho-btn">
                        <span>+</span>
                        <span>Novo Sonho</span>
                    </button>
                </div>
            </div>
            
            <!-- Home Section -->
            <section class="content-section active" id="home-section">
                <div class="welcome-card card">
                    <h2>Bem-vindo de volta!</h2>
                    <p>Veja seu progresso financeiro e continue sua jornada rumo aos seus sonhos.</p>
                </div>
                
                <div class="ai-suggestion">
                    <div style="display: flex; align-items: center;">
                        <span class="suggestion-icon">üí°</span>
                        <div>
                            <strong>Sugest√£o do WealthFlow:</strong>
                            <p id="ai-suggestion-text">Carregando sugest√£o personalizada...</p>
                        </div>
                    </div>
                </div>
                
                <h2 style="margin: 30px 0 15px;">Seus Sonhos em Andamento</h2>
                <div class="cards-grid" id="home-sonhos-grid">
                    <!-- Sonhos ser√£o carregados aqui -->
                </div>
                
                <div style="display: flex; gap: 20px; margin-top: 30px;">
                    <div class="card" style="flex: 1;">
                        <h3>Pr√≥ximos Passos</h3>
                        <p>Confira seus desafios ativos e continue progredindo.</p>
                        <button class="btn btn-primary" style="margin-top: 15px;" data-section="desafios">Ver Desafios</button>
                    </div>
                    
                    <div class="card" style="flex: 1;">
                        <h3>Aprenda Mais</h3>
                        <p>Continue sua jornada de educa√ß√£o financeira.</p>
                        <button class="btn btn-primary" style="margin-top: 15px;" data-section="jornada">Continuar Jornada</button>
                    </div>
                </div>
            </section>
            
            <!-- Sonhos Section -->
            <section class="content-section" id="sonhos-section">
                <div class="cards-grid" id="sonhos-grid">
                    <!-- Sonhos ser√£o carregados aqui -->
                </div>
                
                <div class="empty-state" id="sonhos-empty" style="display: none;">
                    <div class="empty-icon">üéØ</div>
                    <h3>Nenhum sonho cadastrado</h3>
                    <p>Comece criando seu primeiro sonho financeiro!</p>
                    <button class="btn btn-primary" style="margin-top: 15px;" id="add-first-sonho">Criar Primeiro Sonho</button>
                </div>
            </section>
            
            <!-- Simulador Section -->
            <section class="content-section" id="simulador-section">
                <div class="card">
                    <h2>Simulador de Investimentos</h2>
                    <p>Projete seus ganhos com investimentos seguros e conservadores.</p>
                    
                    <form id="simulador-form">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <div class="form-group">
                                <label class="form-label" for="investimento-tipo">Tipo de Investimento</label>
                                <select class="form-control" id="investimento-tipo">
                                    <option value="selic">Tesouro Selic (1.0% ao m√™s)</option>
                                    <option value="cdb">CDB (1.2% ao m√™s)</option>
                                    <option value="lci">LCI/LCA (1.3% ao m√™s)</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="valor-inicial">Valor Inicial (R$)</label>
                                <input type="number" class="form-control" id="valor-inicial" value="1000" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="aporte-mensal">Aporte Mensal (R$)</label>
                                <input type="number" class="form-control" id="aporte-mensal" value="500" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="prazo">Prazo (meses)</label>
                                <input type="number" class="form-control" id="prazo" value="12" min="1" max="120">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" style="margin-top: 20px;">Simular</button>
                    </form>
                    
                    <div id="resultado-simulacao" style="margin-top: 30px; display: none;">
                        <h3>Resultado da Simula√ß√£o</h3>
                        <div class="card" style="margin-top: 15px;">
                            <div id="simulacao-detalhes"></div>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="simulacao-chart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Desafios Section -->
            <section class="content-section" id="desafios-section">
                <h2>Desafios de Economia</h2>
                <p>Participe de desafios para desenvolver h√°bitos financeiros saud√°veis.</p>
                
                <div class="cards-grid" style="margin-top: 20px;">
                    <div class="card challenge-card">
                        <div class="card-header">
                            <h3 class="card-title">Desafio R$5 por dia</h3>
                            <span class="badge">30 dias</span>
                        </div>
                        <p>Economize R$5 todos os dias durante 30 dias e acumule R$150.</p>
                        
                        <div class="progress-container">
                            <div class="progress-info">
                                <span>Progresso</span>
                                <span id="desafio-1-progress">0/30 dias</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="desafio-1-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="challenge-actions">
                            <button class="btn btn-primary" data-desafio="1" id="registrar-desafio-1">Registrar Dia</button>
                        </div>
                    </div>
                    
                    <div class="card challenge-card">
                        <div class="card-header">
                            <h3 class="card-title">Desafio 52 semanas</h3>
                            <span class="badge">1 ano</span>
                        </div>
                        <p>Aumente sua economia semanalmente, come√ßando com R$1 na primeira semana.</p>
                        
                        <div class="progress-container">
                            <div class="progress-info">
                                <span>Progresso</span>
                                <span id="desafio-2-progress">0/52 semanas</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="desafio-2-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="challenge-actions">
                            <button class="btn btn-primary" data-desafio="2" id="registrar-desafio-2">Registrar Semana</button>
                        </div>
                    </div>
                    
                    <div class="card challenge-card">
                        <div class="card-header">
                            <h3 class="card-title">Desafio 30 dias sem sup√©rfluos</h3>
                            <span class="badge">30 dias</span>
                        </div>
                        <p>Evite gastos com sup√©rfluos por 30 dias e redirecione esse dinheiro para seus sonhos.</p>
                        
                        <div class="progress-container">
                            <div class="progress-info">
                                <span>Progresso</span>
                                <span id="desafio-3-progress">0/30 dias</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="desafio-3-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="challenge-actions">
                            <button class="btn btn-primary" data-desafio="3" id="registrar-desafio-3">Registrar Dia</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Jornada Section -->
            <section class="content-section" id="jornada-section">
                <h2>Jornada Educativa</h2>
                <p>Aprenda sobre finan√ßas passo a passo e construa uma base s√≥lida para seus investimentos.</p>
                
                <div class="progress-container" style="margin: 20px 0;">
                    <div class="progress-info">
                        <span>Progresso da Jornada</span>
                        <span id="jornada-progress-text">0/15 conclu√≠dos</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="jornada-progress-bar" style="width: 0%"></div>
                    </div>
                </div>
                
                <div id="jornada-list">
                    <!-- Itens da jornada ser√£o carregados aqui -->
                </div>
            </section>
            
            <!-- Configura√ß√µes Section -->
            <section class="content-section" id="configuracoes-section">
                <div class="card">
                    <h2>Configura√ß√µes</h2>
                    
                    <div class="form-group">
                        <label class="form-label">Modo Casal</label>
                        <div>
                            <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <input type="radio" name="modo-casal" value="individual" checked> Individual
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="radio" name="modo-casal" value="casal"> Em dupla
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Backup e Restaura√ß√£o</label>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button class="btn btn-outline" id="export-backup">
                                <span>üì§</span>
                                <span>Exportar Dados</span>
                            </button>
                            <button class="btn btn-outline" id="import-backup">
                                <span>üì•</span>
                                <span>Importar Dados</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Relat√≥rios</label>
                        <div style="margin-top: 10px;">
                            <button class="btn btn-outline" id="gerar-relatorio">
                                <span>üìä</span>
                                <span>Gerar Relat√≥rio PDF</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Modal para adicionar/editar sonhos -->
    <div class="modal" id="sonho-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="sonho-modal-title">Adicionar Novo Sonho</h3>
                <button class="modal-close" id="close-sonho-modal">&times;</button>
            </div>
            
            <form id="sonho-form">
                <input type="hidden" id="sonho-id">
                
                <div class="form-group">
                    <label class="form-label" for="sonho-nome">Nome do Sonho</label>
                    <input type="text" class="form-control" id="sonho-nome" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="sonho-valor">Valor Total (R$)</label>
                    <input type="number" class="form-control" id="sonho-valor" min="0" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="sonho-prazo">Prazo (meses)</label>
                    <input type="number" class="form-control" id="sonho-prazo" min="1" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="sonho-valor-atual">Valor Atual (R$)</label>
                    <input type="number" class="form-control" id="sonho-valor-atual" min="0" step="0.01" value="0">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="sonho-tipo">Tipo</label>
                    <select class="form-control" id="sonho-tipo">
                        <option value="individual">Individual</option>
                        <option value="casal">Em dupla</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="sonho-descricao">Descri√ß√£o (opcional)</label>
                    <textarea class="form-control" id="sonho-descricao" rows="3"></textarea>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="button" class="btn btn-outline" id="cancel-sonho">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Sonho</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal de backup -->
    <div class="modal" id="backup-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Backup dos Dados</h3>
                <button class="modal-close" id="close-backup-modal">&times;</button>
            </div>
            
            <div id="backup-export" style="display: block;">
                <p>Fa√ßa backup de todos os seus dados para n√£o perd√™-los.</p>
                <textarea class="form-control" id="backup-data" rows="10" style="margin: 15px 0; font-family: monospace;" readonly></textarea>
                <button class="btn btn-primary" id="copy-backup">Copiar Dados</button>
            </div>
            
            <div id="backup-import" style="display: none;">
                <p>Cole os dados de backup abaixo para restaurar:</p>
                <textarea class="form-control" id="restore-data" rows="10" style="margin: 15px 0; font-family: monospace;"></textarea>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-outline" id="cancel-import">Cancelar</button>
                    <button class="btn btn-primary" id="confirm-import">Restaurar Dados</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // M√≥dulo de Armazenamento
        const Storage = {
            // Chaves para localStorage
            keys: {
                SONHOS: 'wealthflow_sonhos',
                DESAFIOS: 'wealthflow_desafios',
                JORNADA: 'wealthflow_jornada',
                CONFIG: 'wealthflow_config',
                ONBOARDING: 'wealthflow_onboarding'
            },

            // Salvar dados
            save(key, data) {
                try {
                    localStorage.setItem(key, JSON.stringify(data));
                    return true;
                } catch (e) {
                    console.error('Erro ao salvar dados:', e);
                    return false;
                }
            },

            // Carregar dados
            load(key, defaultValue = null) {
                try {
                    const data = localStorage.getItem(key);
                    return data ? JSON.parse(data) : defaultValue;
                } catch (e) {
                    console.error('Erro ao carregar dados:', e);
                    return defaultValue;
                }
            },

            // Limpar dados
            clear(key) {
                localStorage.removeItem(key);
            },

            // Exportar todos os dados
            exportData() {
                const data = {};
                for (const key in this.keys) {
                    data[this.keys[key]] = this.load(this.keys[key]);
                }
                return JSON.stringify(data, null, 2);
            },

            // Importar dados
            importData(jsonString) {
                try {
                    const data = JSON.parse(jsonString);
                    for (const key in data) {
                        this.save(key, data[key]);
                    }
                    return true;
                } catch (e) {
                    console.error('Erro ao importar dados:', e);
                    return false;
                }
            }
        };

        // M√≥dulo de Sonhos
        const Sonhos = {
            list: [],

            init() {
                this.list = Storage.load(Storage.keys.SONHOS, []);
                this.renderList();
            },

            // Adicionar ou atualizar sonho
            save(sonhoData) {
                if (sonhoData.id) {
                    // Atualizar sonho existente
                    const index = this.list.findIndex(s => s.id === sonhoData.id);
                    if (index !== -1) {
                        this.list[index] = {...this.list[index], ...sonhoData};
                    }
                } else {
                    // Adicionar novo sonho
                    sonhoData.id = Date.now().toString();
                    sonhoData.createdAt = new Date().toISOString();
                    this.list.push(sonhoData);
                }

                if (Storage.save(Storage.keys.SONHOS, this.list)) {
                    this.renderList();
                    return true;
                }
                return false;
            },

            // Excluir sonho
            delete(id) {
                this.list = this.list.filter(s => s.id !== id);
                if (Storage.save(Storage.keys.SONHOS, this.list)) {
                    this.renderList();
                    return true;
                }
                return false;
            },

            // Calcular progresso
            calcularProgresso(sonho) {
                const percentual = (sonho.valorAtual / sonho.valorTotal) * 100;
                const mesesRestantes = sonho.prazo - this.calcularMesesDesdeCriacao(sonho.createdAt);
                
                return {
                    percentual: Math.min(percentual, 100),
                    mesesRestantes: Math.max(mesesRestantes, 0),
                    valorRestante: sonho.valorTotal - sonho.valorAtual
                };
            },

            // Calcular meses desde a cria√ß√£o
            calcularMesesDesdeCriacao(createdAt) {
                const created = new Date(createdAt);
                const now = new Date();
                return (now.getFullYear() - created.getFullYear()) * 12 + (now.getMonth() - created.getMonth());
            },

            // Renderizar lista de sonhos
            renderList(containerId = 'sonhos-grid') {
                const container = document.getElementById(containerId);
                const emptyState = document.getElementById('sonhos-empty');
                
                if (this.list.length === 0) {
                    if (container) container.innerHTML = '';
                    if (emptyState) emptyState.style.display = 'block';
                    return;
                }
                
                if (emptyState) emptyState.style.display = 'none';
                
                let html = '';
                this.list.forEach(sonho => {
                    const progresso = this.calcularProgresso(sonho);
                    
                    html += `
                        <div class="card" data-id="${sonho.id}">
                            <div class="card-header">
                                <h3 class="card-title">${sonho.nome}</h3>
                                <div class="card-actions">
                                    <button class="icon-btn edit-sonho" title="Editar">‚úèÔ∏è</button>
                                    <button class="icon-btn delete-sonho" title="Excluir">üóëÔ∏è</button>
                                </div>
                            </div>
                            
                            ${sonho.descricao ? `<p>${sonho.descricao}</p>` : ''}
                            
                            <div class="progress-container">
                                <div class="progress-info">
                                    <span>R$ ${sonho.valorAtual.toFixed(2)} / R$ ${sonho.valorTotal.toFixed(2)}</span>
                                    <span>${progresso.percentual.toFixed(1)}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progresso.percentual}%"></div>
                                </div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; margin-top: 15px; font-size: 14px; color: var(--text-muted);">
                                <span>${sonho.tipo === 'casal' ? 'üë• Em dupla' : 'üë§ Individual'}</span>
                                <span>${progresso.mesesRestantes} meses restantes</span>
                            </div>
                        </div>
                    `;
                });
                
                if (container) container.innerHTML = html;
                
                // Adicionar event listeners para os bot√µes de editar e excluir
                document.querySelectorAll('.edit-sonho').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const card = e.target.closest('.card');
                        const id = card.getAttribute('data-id');
                        this.openEditModal(id);
                    });
                });
                
                document.querySelectorAll('.delete-sonho').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const card = e.target.closest('.card');
                        const id = card.getAttribute('data-id');
                        if (confirm('Tem certeza que deseja excluir este sonho?')) {
                            this.delete(id);
                        }
                    });
                });
            },

            // Abrir modal para edi√ß√£o
            openEditModal(id = null) {
                const modal = document.getElementById('sonho-modal');
                const form = document.getElementById('sonho-form');
                const title = document.getElementById('sonho-modal-title');
                
                if (id) {
                    // Modo edi√ß√£o
                    const sonho = this.list.find(s => s.id === id);
                    if (sonho) {
                        document.getElementById('sonho-id').value = sonho.id;
                        document.getElementById('sonho-nome').value = sonho.nome;
                        document.getElementById('sonho-valor').value = sonho.valorTotal;
                        document.getElementById('sonho-prazo').value = sonho.prazo;
                        document.getElementById('sonho-valor-atual').value = sonho.valorAtual;
                        document.getElementById('sonho-tipo').value = sonho.tipo || 'individual';
                        document.getElementById('sonho-descricao').value = sonho.descricao || '';
                        title.textContent = 'Editar Sonho';
                    }
                } else {
                    // Modo cria√ß√£o
                    form.reset();
                    document.getElementById('sonho-id').value = '';
                    document.getElementById('sonho-valor-atual').value = '0';
                    title.textContent = 'Adicionar Novo Sonho';
                }
                
                modal.classList.add('active');
            },

            // Gerar sugest√£o IA
            gerarSugestaoIA() {
                if (this.list.length === 0) {
                    return "Crie seu primeiro sonho para receber sugest√µes personalizadas!";
                }
                
                const sonhoMaisProximo = this.list.reduce((prev, current) => {
                    const progressoPrev = this.calcularProgresso(prev);
                    const progressoCurrent = this.calcularProgresso(current);
                    return progressoPrev.percentual < progressoCurrent.percentual ? prev : current;
                });
                
                const progresso = this.calcularProgresso(sonhoMaisProximo);
                const economiaNecessaria = progresso.valorRestante / progresso.mesesRestantes;
                
                if (progresso.mesesRestantes <= 0) {
                    return `"${sonhoMaisProximo.nome}" est√° atrasado! Considere ajustar o prazo ou valor.`;
                }
                
                return `Para alcan√ßar "${sonhoMaisProximo.nome}" em ${progresso.mesesRestantes} meses, economize R$ ${economiaNecessaria.toFixed(2)} por m√™s.`;
            }
        };

        // M√≥dulo de Simulador
        const Simulador = {
            taxas: {
                selic: 0.01,   // 1.0% ao m√™s
                cdb: 0.012,    // 1.2% ao m√™s
                lci: 0.013     // 1.3% ao m√™s
            },

            init() {
                document.getElementById('simulador-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.simular();
                });
            },

            // Realizar simula√ß√£o
            simular() {
                const tipo = document.getElementById('investimento-tipo').value;
                const valorInicial = parseFloat(document.getElementById('valor-inicial').value);
                const aporteMensal = parseFloat(document.getElementById('aporte-mensal').value);
                const prazo = parseInt(document.getElementById('prazo').value);
                
                const taxaMensal = this.taxas[tipo];
                let valorAcumulado = valorInicial;
                const historico = [valorInicial];
                
                for (let i = 1; i <= prazo; i++) {
                    valorAcumulado = (valorAcumulado * (1 + taxaMensal)) + aporteMensal;
                    historico.push(valorAcumulado);
                }
                
                const totalAportado = valorInicial + (aporteMensal * prazo);
                const totalJuros = valorAcumulado - totalAportado;
                
                this.exibirResultado(tipo, valorAcumulado, totalAportado, totalJuros, prazo, historico);
            },

            // Exibir resultado da simula√ß√£o
            exibirResultado(tipo, valorFinal, totalAportado, totalJuros, prazo, historico) {
                const resultadoDiv = document.getElementById('resultado-simulacao');
                const detalhesDiv = document.getElementById('simulacao-detalhes');
                
                const nomesInvestimentos = {
                    selic: 'Tesouro Selic',
                    cdb: 'CDB',
                    lci: 'LCI/LCA'
                };
                
                detalhesDiv.innerHTML = `
                    <h4>${nomesInvestimentos[tipo]}</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div>
                            <strong>Valor Final:</strong><br>
                            <span style="font-size: 24px; color: var(--primary);">R$ ${valorFinal.toFixed(2)}</span>
                        </div>
                        <div>
                            <strong>Total Aportado:</strong><br>
                            R$ ${totalAportado.toFixed(2)}
                        </div>
                        <div>
                            <strong>Juros Acumulados:</strong><br>
                            R$ ${totalJuros.toFixed(2)}
                        </div>
                        <div>
                            <strong>Per√≠odo:</strong><br>
                            ${prazo} meses
                        </div>
                    </div>
                `;
                
                resultadoDiv.style.display = 'block';
                this.renderChart(historico, prazo);
            },

            // Renderizar gr√°fico
            renderChart(historico, prazo) {
                const canvas = document.getElementById('simulacao-chart');
                const ctx = canvas.getContext('2d');
                
                // Configurar dimens√µes
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                const width = canvas.width;
                const height = canvas.height;
                const padding = 40;
                
                // Limpar canvas
                ctx.clearRect(0, 0, width, height);
                
                // Encontrar valores m√°ximo e m√≠nimo
                const maxVal = Math.max(...historico);
                const minVal = Math.min(...historico);
                
                // Calcular escalas
                const xScale = (width - padding * 2) / (historico.length - 1);
                const yScale = (height - padding * 2) / (maxVal - minVal);
                
                // Desenhar eixo X
                ctx.beginPath();
                ctx.moveTo(padding, height - padding);
                ctx.lineTo(width - padding, height - padding);
                ctx.strokeStyle = var(--text-muted);
                ctx.stroke();
                
                // Desenhar eixo Y
                ctx.beginPath();
                ctx.moveTo(padding, padding);
                ctx.lineTo(padding, height - padding);
                ctx.strokeStyle = var(--text-muted);
                ctx.stroke();
                
                // Desenhar linha do gr√°fico
                ctx.beginPath();
                historico.forEach((valor, index) => {
                    const x = padding + (index * xScale);
                    const y = height - padding - ((valor - minVal) * yScale);
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                
                ctx.strokeStyle = var(--primary);
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // Adicionar pontos
                historico.forEach((valor, index) => {
                    const x = padding + (index * xScale);
                    const y = height - padding - ((valor - minVal) * yScale);
                    
                    ctx.beginPath();
                    ctx.arc(x, y, 4, 0, Math.PI * 2);
                    ctx.fillStyle = var(--primary);
                    ctx.fill();
                });
                
                // Adicionar r√≥tulos
                ctx.fillStyle = var(--text);
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                
                // R√≥tulo do eixo X
                ctx.fillText('M√™s 0', padding, height - padding + 20);
                ctx.fillText(`M√™s ${prazo}`, width - padding, height - padding + 20);
                
                // R√≥tulo do eixo Y
                ctx.save();
                ctx.translate(padding - 20, height / 2);
                ctx.rotate(-Math.PI / 2);
                ctx.textAlign = 'center';
                ctx.fillText('Valor (R$)', 0, 0);
                ctx.restore();
            }
        };

        // M√≥dulo de Desafios
        const Desafios = {
            desafios: [
                {
                    id: 1,
                    nome: 'Desafio R$5 por dia',
                    descricao: 'Economize R$5 todos os dias durante 30 dias e acumule R$150.',
                    tipo: 'diario',
                    duracao: 30,
                    progresso: 0,
                    valor: 5
                },
                {
                    id: 2,
                    nome: 'Desafio 52 semanas',
                    descricao: 'Aumente sua economia semanalmente, come√ßando com R$1 na primeira semana.',
                    tipo: 'semanal',
                    duracao: 52,
                    progresso: 0,
                    valor: 1
                },
                {
                    id: 3,
                    nome: 'Desafio 30 dias sem sup√©rfluos',
                    descricao: 'Evite gastos com sup√©rfluos por 30 dias e redirecione esse dinheiro para seus sonhos.',
                    tipo: 'diario',
                    duracao: 30,
                    progresso: 0
                }
            ],

            init() {
                const saved = Storage.load(Storage.keys.DESAFIOS);
                if (saved) {
                    this.desafios = saved;
                }
                
                this.renderDesafios();
                
                // Adicionar event listeners
                document.querySelectorAll('button[data-desafio]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const desafioId = parseInt(e.target.getAttribute('data-desafio'));
                        this.registrarProgresso(desafioId);
                    });
                });
            },

            // Registrar progresso no desafio
            registrarProgresso(desafioId) {
                const desafio = this.desafios.find(d => d.id === desafioId);
                if (desafio && desafio.progresso < desafio.duracao) {
                    desafio.progresso++;
                    
                    if (Storage.save(Storage.keys.DESAFIOS, this.desafios)) {
                        this.renderDesafios();
                        
                        // Adicionar valor ao sonho se aplic√°vel
                        if (desafio.valor) {
                            this.adicionarValorSonho(desafio.valor);
                        }
                        
                        alert(`Progresso registrado no ${desafio.nome}!`);
                    }
                }
            },

            // Adicionar valor economizado a um sonho
            adicionarValorSonho(valor) {
                if (Sonhos.list.length > 0) {
                    // Encontrar o sonho com menor progresso
                    const sonhoMenorProgresso = Sonhos.list.reduce((prev, current) => {
                        const progressoPrev = Sonhos.calcularProgresso(prev);
                        const progressoCurrent = Sonhos.calcularProgresso(current);
                        return progressoPrev.percentual < progressoCurrent.percentual ? prev : current;
                    });
                    
                    // Adicionar valor ao sonho
                    sonhoMenorProgresso.valorAtual += valor;
                    Sonhos.save(sonhoMenorProgresso);
                }
            },

            // Renderizar desafios
            renderDesafios() {
                this.desafios.forEach(desafio => {
                    const progressoElement = document.getElementById(`desafio-${desafio.id}-progress`);
                    const barElement = document.getElementById(`desafio-${desafio.id}-bar`);
                    
                    if (progressoElement) {
                        progressoElement.textContent = `${desafio.progresso}/${desafio.duracao} ${desafio.tipo === 'diario' ? 'dias' : 'semanas'}`;
                    }
                    
                    if (barElement) {
                        const percentual = (desafio.progresso / desafio.duracao) * 100;
                        barElement.style.width = `${percentual}%`;
                    }
                });
            }
        };

        // M√≥dulo de Jornada Educativa
        const Jornada = {
            etapas: [
                {
                    id: 1,
                    titulo: "Reserva de Emerg√™ncia",
                    descricao: "Entenda a import√¢ncia de ter uma reserva para imprevistos.",
                    concluida: false
                },
                {
                    id: 2,
                    titulo: "Juros Compostos",
                    descricao: "Aprenda como os juros compostos podem multiplicar seu dinheiro.",
                    concluida: false
                },
                {
                    id: 3,
                    titulo: "Or√ßamento Pessoal",
                    descricao: "Como criar e manter um or√ßamento eficiente.",
                    concluida: false
                },
                {
                    id: 4,
                    titulo: "Investimentos Conservadores",
                    descricao: "Conhe√ßa op√ß√µes de investimento de baixo risco.",
                    concluida: false
                },
                {
                    id: 5,
                    titulo: "Metas Financeiras",
                    descricao: "Aprenda a definir e alcan√ßar suas metas financeiras.",
                    concluida: false
                },
                {
                    id: 6,
                    titulo: "D√≠vidas: Como Evitar e Quitar",
                    descricao: "Estrat√©gias para evitar e eliminar d√≠vidas.",
                    concluida: false
                },
                {
                    id: 7,
                    titulo: "Educa√ß√£o Financeira para Fam√≠lia",
                    descricao: "Como envolver a fam√≠lia no planejamento financeiro.",
                    concluida: false
                },
                {
                    id: 8,
                    titulo: "Previd√™ncia Privada",
                    descricao: "Entenda como funciona a previd√™ncia privada.",
                    concluida: false
                },
                {
                    id: 9,
                    titulo: "Imposto de Renda para Investidores",
                    descricao: "No√ß√µes b√°sicas sobre declara√ß√£o de investimentos.",
                    concluida: false
                },
                {
                    id: 10,
                    titulo: "Ciclo de Vida Financeiro",
                    descricao: "Planejamento financeiro para diferentes fases da vida.",
                    concluida: false
                }
            ],

            init() {
                const saved = Storage.load(Storage.keys.JORNADA);
                if (saved) {
                    this.etapas = saved;
                }
                
                this.renderJornada();
                this.atualizarProgresso();
            },

            // Marcar etapa como conclu√≠da
            toggleEtapa(id) {
                const etapa = this.etapas.find(e => e.id === id);
                if (etapa) {
                    etapa.concluida = !etapa.concluida;
                    
                    if (Storage.save(Storage.keys.JORNADA, this.etapas)) {
                        this.renderJornada();
                        this.atualizarProgresso();
                    }
                }
            },

            // Renderizar jornada
            renderJornada() {
                const container = document.getElementById('jornada-list');
                if (!container) return;
                
                let html = '';
                this.etapas.forEach(etapa => {
                    html += `
                        <div class="journey-item ${etapa.concluida ? 'completed' : ''}" data-id="${etapa.id}">
                            <div class="journey-checkbox">
                                <span class="journey-checkmark">‚úì</span>
                            </div>
                            <div class="journey-content">
                                <div class="journey-title">${etapa.titulo}</div>
                                <div class="journey-description">${etapa.descricao}</div>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                
                // Adicionar event listeners
                document.querySelectorAll('.journey-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        const id = parseInt(item.getAttribute('data-id'));
                        this.toggleEtapa(id);
                    });
                });
            },

            // Atualizar barra de progresso
            atualizarProgresso() {
                const concluidas = this.etapas.filter(e => e.concluida).length;
                const total = this.etapas.length;
                const percentual = (concluidas / total) * 100;
                
                const progressText = document.getElementById('jornada-progress-text');
                const progressBar = document.getElementById('jornada-progress-bar');
                
                if (progressText) {
                    progressText.textContent = `${concluidas}/${total} conclu√≠dos`;
                }
                
                if (progressBar) {
                    progressBar.style.width = `${percentual}%`;
                }
            }
        };

        // M√≥dulo de UI e Navega√ß√£o
        const UI = {
            currentSection: 'home',

            init() {
                this.setupNavigation();
                this.setupModals();
                this.setupOnboarding();
                
                // Verificar se √© a primeira vez do usu√°rio
                const onboardingCompleted = Storage.load(Storage.keys.ONBOARDING, false);
                if (!onboardingCompleted) {
                    document.getElementById('onboarding').style.display = 'flex';
                }
            },

            // Configurar navega√ß√£o
            setupNavigation() {
                // Navega√ß√£o do menu lateral
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.getAttribute('data-section');
                        this.showSection(section);
                        
                        // Atualizar menu ativo
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                    });
                });
                
                // Bot√µes que mudam de se√ß√£o
                document.querySelectorAll('button[data-section]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const section = btn.getAttribute('data-section');
                        this.showSection(section);
                        
                        // Atualizar menu ativo
                        document.querySelectorAll('.nav-link').forEach(link => {
                            link.classList.toggle('active', link.getAttribute('data-section') === section);
                        });
                    });
                });
                
                // Menu toggle para mobile
                document.getElementById('menu-toggle').addEventListener('click', () => {
                    document.getElementById('sidebar').classList.toggle('active');
                });
            },

            // Mostrar se√ß√£o
            showSection(section) {
                // Esconder todas as se√ß√µes
                document.querySelectorAll('.content-section').forEach(sec => {
                    sec.classList.remove('active');
                });
                
                // Mostrar se√ß√£o selecionada
                const targetSection = document.getElementById(`${section}-section`);
                if (targetSection) {
                    targetSection.classList.add('active');
                    this.currentSection = section;
                    
                    // Atualizar t√≠tulo da p√°gina
                    const titles = {
                        home: 'In√≠cio',
                        sonhos: 'Meus Sonhos',
                        simulador: 'Simulador',
                        desafios: 'Desafios',
                        jornada: 'Jornada',
                        configuracoes: 'Configura√ß√µes'
                    };
                    
                    document.getElementById('page-title').textContent = titles[section] || 'WealthFlow';
                    
                    // Rolagem para o topo
                    window.scrollTo(0, 0);
                    
                    // Atualizar conte√∫do espec√≠fico da se√ß√£o
                    if (section === 'home') {
                        Sonhos.renderList('home-sonhos-grid');
                        document.getElementById('ai-suggestion-text').textContent = Sonhos.gerarSugestaoIA();
                    }
                }
            },

            // Configurar modais
            setupModals() {
                // Modal de sonhos
                document.getElementById('add-sonho-btn').addEventListener('click', () => {
                    Sonhos.openEditModal();
                });
                
                document.getElementById('add-first-sonho').addEventListener('click', () => {
                    Sonhos.openEditModal();
                });
                
                document.getElementById('close-sonho-modal').addEventListener('click', () => {
                    document.getElementById('sonho-modal').classList.remove('active');
                });
                
                document.getElementById('cancel-sonho').addEventListener('click', () => {
                    document.getElementById('sonho-modal').classList.remove('active');
                });
                
                document.getElementById('sonho-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const sonhoData = {
                        id: document.getElementById('sonho-id').value || null,
                        nome: document.getElementById('sonho-nome').value,
                        valorTotal: parseFloat(document.getElementById('sonho-valor').value),
                        prazo: parseInt(document.getElementById('sonho-prazo').value),
                        valorAtual: parseFloat(document.getElementById('sonho-valor-atual').value),
                        tipo: document.getElementById('sonho-tipo').value,
                        descricao: document.getElementById('sonho-descricao').value
                    };
                    
                    if (Sonhos.save(sonhoData)) {
                        document.getElementById('sonho-modal').classList.remove('active');
                        alert('Sonho salvo com sucesso!');
                    } else {
                        alert('Erro ao salvar sonho. Tente novamente.');
                    }
                });
                
                // Modal de backup
                document.getElementById('backup-btn').addEventListener('click', () => {
                    this.showBackupModal();
                });
                
                document.getElementById('close-backup-modal').addEventListener('click', () => {
                    document.getElementById('backup-modal').classList.remove('active');
                });
                
                document.getElementById('export-backup').addEventListener('click', () => {
                    this.showBackupModal();
                });
                
                document.getElementById('import-backup').addEventListener('click', () => {
                    this.showImportModal();
                });
                
                document.getElementById('copy-backup').addEventListener('click', () => {
                    const backupData = document.getElementById('backup-data');
                    backupData.select();
                    document.execCommand('copy');
                    alert('Dados copiados para a √°rea de transfer√™ncia!');
                });
                
                document.getElementById('cancel-import').addEventListener('click', () => {
                    this.showBackupModal();
                });
                
                document.getElementById('confirm-import').addEventListener('click', () => {
                    const restoreData = document.getElementById('restore-data').value;
                    if (restoreData && confirm('Isso substituir√° todos os seus dados atuais. Continuar?')) {
                        if (Storage.importData(restoreData)) {
                            location.reload(); // Recarregar para aplicar os dados
                        } else {
                            alert('Erro ao restaurar dados. Verifique o formato.');
                        }
                    }
                });
                
                // Gerar relat√≥rio PDF
                document.getElementById('gerar-relatorio').addEventListener('click', () => {
                    this.gerarRelatorio();
                });
            },

            // Mostrar modal de backup
            showBackupModal() {
                const modal = document.getElementById('backup-modal');
                const exportDiv = document.getElementById('backup-export');
                const importDiv = document.getElementById('backup-import');
                
                exportDiv.style.display = 'block';
                importDiv.style.display = 'none';
                
                document.getElementById('backup-data').value = Storage.exportData();
                modal.classList.add('active');
            },

            // Mostrar modal de importa√ß√£o
            showImportModal() {
                const modal = document.getElementById('backup-modal');
                const exportDiv = document.getElementById('backup-export');
                const importDiv = document.getElementById('backup-import');
                
                exportDiv.style.display = 'none';
                importDiv.style.display = 'block';
                
                document.getElementById('restore-data').value = '';
                modal.classList.add('active');
            },

            // Gerar relat√≥rio PDF (simula√ß√£o)
            gerarRelatorio() {
                // Em uma implementa√ß√£o real, isso geraria um PDF
                // Por enquanto, vamos apenas mostrar os dados em um alerta
                const sonhosCount = Sonhos.list.length;
                const desafiosProgress = Desafios.desafios.reduce((acc, d) => acc + d.progresso, 0);
                const jornadaProgress = Jornada.etapas.filter(e => e.concluida).length;
                
                alert(`Relat√≥rio WealthFlow:\n\n` +
                      `Sonhos: ${sonhosCount}\n` +
                      `Progresso em Desafios: ${desafiosProgress} dias/semanas\n` +
                      `Etapas da Jornada Conclu√≠das: ${jornadaProgress}/10\n\n` +
                      `Em uma vers√£o completa, isso geraria um PDF com todos os detalhes.`);
            },

            // Configurar onboarding
            setupOnboarding() {
                let currentSlide = 0;
                const slides = document.querySelectorAll('.onboarding-slide');
                const indicators = document.querySelectorAll('.indicator');
                const nextBtn = document.getElementById('next-onboarding');
                const skipBtn = document.getElementById('skip-onboarding');
                
                function showSlide(index) {
                    slides.forEach(slide => slide.classList.remove('active'));
                    indicators.forEach(indicator => indicator.classList.remove('active'));
                    
                    slides[index].classList.add('active');
                    indicators[index].classList.add('active');
                    
                    // Atualizar texto do bot√£o na √∫ltima tela
                    if (index === slides.length - 1) {
                        nextBtn.textContent = 'Come√ßar';
                    } else {
                        nextBtn.textContent = 'Pr√≥ximo';
                    }
                }
                
                nextBtn.addEventListener('click', () => {
                    currentSlide++;
                    
                    if (currentSlide < slides.length) {
                        showSlide(currentSlide);
                    } else {
                        // Finalizar onboarding
                        Storage.save(Storage.keys.ONBOARDING, true);
                        document.getElementById('onboarding').style.display = 'none';
                    }
                });
                
                skipBtn.addEventListener('click', () => {
                    Storage.save(Storage.keys.ONBOARDING, true);
                    document.getElementById('onboarding').style.display = 'none';
                });
                
                // Iniciar com o primeiro slide
                showSlide(0);
            }
        };

        // Inicializa√ß√£o da aplica√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar m√≥dulos
            Sonhos.init();
            Simulador.init();
            Desafios.init();
            Jornada.init();
            UI.init();
            
            // Atualizar sugest√£o IA na home
            document.getElementById('ai-suggestion-text').textContent = Sonhos.gerarSugestaoIA();
        });
    </script>
</body>
</html>
