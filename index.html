<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üç∞ Dolce Maria - Card√°pio Digital Completo</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

  :root {
    --rosa-bebe: #ffd9e8;
    --rosa-forte: #ff69b4;
    --azul-bebe: #d0f7ff;
    --azul-forte: #3ea1f7;
    --branco: #fff;
    --preto: #222;
    --cinza-claro: #f7f7f7;
    --cinza-escuro: #444;
    --verde: #25d366;
    --verde-escuro: #1ebe57;
    --roxo: #9c27b0;
  }

  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: var(--rosa-bebe);
    color: var(--preto);
    transition: background 0.3s, color 0.3s;
    padding-bottom: 80px;
  }
  body.escuro {
    background: #121212;
    color: #eee;
  }

  header {
    background: var(--branco);
    padding: 1rem 2rem;
    box-shadow: 0 4px 8px rgba(255,105,180,0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  body.escuro header {
    background: #222;
    box-shadow: 0 4px 8px rgba(62, 161, 247, 0.4);
  }

  header h1 {
    font-weight: 700;
    font-size: 2rem;
    color: var(--rosa-forte);
    margin: 0;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  #status-loja {
    font-weight: 600;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 1rem;
    background: var(--azul-bebe);
    color: var(--preto);
    user-select: none;
    transition: all 0.3s;
  }
  #status-loja.fechado {
    background: #ffc8c8;
    color: #900;
  }
  body.escuro #status-loja {
    background: var(--azul-forte);
    color: #fff;
  }
  body.escuro #status-loja.fechado {
    background: #aa4444;
    color: #fff;
  }

  .container-principal {
    max-width: 1200px;
    margin: 20px auto;
    padding: 0 1rem;
  }

  /* DESTAQUES */
  .destaques-container {
    width: 100%;
    overflow: hidden;
    position: relative;
    margin-bottom: 30px;
    border-radius: 20px;
    box-shadow: 0 8px 15px rgba(255,105,180,0.2);
    height: 300px;
  }
  body.escuro .destaques-container {
    box-shadow: 0 8px 15px rgba(62, 161, 247, 0.4);
  }

  .slides-destaque {
    display: flex;
    transition: transform 0.5s ease;
    height: 100%;
  }

  .slide-destaque {
    min-width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-size: cover;
    background-position: center;
    color: white;
    text-align: center;
    padding: 20px;
    position: relative;
  }
  .slide-destaque::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.4);
  }

  .slide-destaque h2 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    position: relative;
    z-index: 1;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
  }

  .slide-destaque p {
    font-size: 1.2rem;
    max-width: 80%;
    position: relative;
    z-index: 1;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
  }

  .controle-slide {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.3);
    border: none;
    color: white;
    font-size: 1.5rem;
    padding: 10px 15px;
    cursor: pointer;
    z-index: 10;
    border-radius: 50%;
    backdrop-filter: blur(5px);
    transition: all 0.3s;
  }
  .controle-slide:hover {
    background: rgba(255,255,255,0.5);
  }

  #prev-slide {
    left: 15px;
  }

  #next-slide {
    right: 15px;
  }

  .indicadores-slide {
    position: absolute;
    bottom: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 10px;
    z-index: 10;
  }

  .indicador {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255,255,255,0.5);
    cursor: pointer;
    transition: all 0.3s;
  }
  .indicador.ativo {
    background: var(--rosa-forte);
    transform: scale(1.2);
  }

  /* PRODUTOS */
  .produtos-area {
    background: var(--branco);
    border-radius: 20px;
    padding: 25px 30px;
    box-shadow: 0 8px 15px rgba(255,105,180,0.2);
  }
  body.escuro .produtos-area {
    background: #222;
    box-shadow: 0 8px 15px rgba(62, 161, 247, 0.4);
  }

  .categoria {
    margin-bottom: 2.5rem;
  }

  .categoria h2 {
    font-size: 1.8rem;
    color: var(--rosa-forte);
    margin-bottom: 20px;
    border-bottom: 3px solid var(--azul-forte);
    padding-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  body.escuro .categoria h2 {
    color: var(--azul-forte);
    border-color: var(--rosa-forte);
  }

  .lista-produtos {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
    gap: 20px;
  }

  .produto {
    background: var(--rosa-bebe);
    border-radius: 15px;
    padding: 20px 15px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(255, 105, 180, 0.15);
    cursor: pointer;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    position: relative;
    overflow: hidden;
  }
  .produto:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 20px rgba(255, 105, 180, 0.3);
  }
  body.escuro .produto {
    background: #2c2c2c;
    box-shadow: 0 4px 8px rgba(62, 161, 247, 0.15);
  }
  body.escuro .produto:hover {
    box-shadow: 0 10px 20px rgba(62, 161, 247, 0.3);
  }

  .produto.destaque {
    border: 2px solid var(--rosa-forte);
    animation: pulse 2s infinite;
  }
  body.escuro .produto.destaque {
    border-color: var(--azul-forte);
  }

  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(255,105,180,0.4); }
    70% { box-shadow: 0 0 0 10px rgba(255,105,180,0); }
    100% { box-shadow: 0 0 0 0 rgba(255,105,180,0); }
  }

  .produto strong {
    display: block;
    font-size: 1.2rem;
    margin-bottom: 6px;
    color: var(--rosa-forte);
  }
  body.escuro .produto strong {
    color: var(--azul-forte);
  }

  .produto small {
    font-size: 0.9rem;
    color: #555;
  }
  body.escuro .produto small {
    color: #ccc;
  }

  /* BOT√ÉO */
  .btn-adicionar {
    margin-top: 12px;
    padding: 10px 18px;
    border: none;
    border-radius: 12px;
    background: var(--azul-forte);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  .btn-adicionar:hover {
    background: #2a8de0;
    transform: translateY(-2px);
  }
  .btn-adicionar:disabled {
    background: #aaa;
    cursor: not-allowed;
    transform: none;
  }
  .btn-adicionar:active {
    transform: translateY(0);
  }

  /* CARRINHO FLOUTANTE */
  #carrinho-flutuante {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 320px;
    max-height: 80vh;
    background: var(--branco);
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(255, 105, 180, 0.5);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 2000;
    transition: all 0.3s ease;
  }
  body.escuro #carrinho-flutuante {
    background: #222;
    box-shadow: 0 10px 25px rgba(62, 161, 247, 0.7);
  }
  #carrinho-flutuante.compacto {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 6px 18px rgba(255, 105, 180, 0.4);
  }

  #carrinho-flutuante.compacto .conteudo-carrinho {
    display: none;
  }
  #carrinho-flutuante.compacto .contador-itens {
    display: flex;
  }

  /* Conte√∫do do carrinho */
  .conteudo-carrinho {
    padding: 20px;
    flex-grow: 1;
    overflow-y: auto;
  }

  .conteudo-carrinho h3 {
    margin: 0 0 15px 0;
    color: var(--rosa-forte);
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  body.escuro .conteudo-carrinho h3 {
    color: var(--azul-forte);
  }

  #itens-carrinho {
    list-style: none;
    padding: 0;
    margin: 0 0 20px 0;
    max-height: 300px;
    overflow-y: auto;
  }
  #itens-carrinho li {
    font-size: 1rem;
    padding: 8px 0;
    border-bottom: 1px dashed #e8b3d6;
    color: var(--preto);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #itens-carrinho li .remover-item {
    color: #ff4444;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    padding: 0 5px;
  }
  body.escuro #itens-carrinho li {
    color: #ddd;
    border-color: #3ea1f7;
  }

  #total-carrinho {
    font-weight: 700;
    font-size: 1.2rem;
    color: var(--rosa-forte);
    margin-bottom: 15px;
  }
  body.escuro #total-carrinho {
    color: var(--azul-forte);
  }

  .grupo-input {
    margin-bottom: 15px;
  }

  .grupo-input label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: var(--preto);
  }
  body.escuro .grupo-input label {
    color: #ddd;
  }

  .grupo-input input, 
  .grupo-input select {
    padding: 10px;
    border-radius: 12px;
    border: 2px solid var(--azul-forte);
    width: 100%;
    font-size: 1rem;
    outline-offset: 0;
    transition: border-color 0.3s ease;
    background: var(--branco);
  }
  .grupo-input input:focus,
  .grupo-input select:focus {
    border-color: var(--rosa-forte);
  }
  body.escuro .grupo-input input,
  body.escuro .grupo-input select {
    background: #333;
    border-color: var(--rosa-forte);
    color: #eee;
  }

  #cupom-input {
    margin-bottom: 5px;
  }

  .metodo-pagamento {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
  }

  .metodo-pagamento label {
    flex: 1;
    padding: 10px;
    border: 2px solid var(--azul-forte);
    border-radius: 12px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
  }
  .metodo-pagamento input:checked + label {
    background: var(--azul-forte);
    color: white;
    border-color: var(--azul-forte);
  }
  body.escuro .metodo-pagamento label {
    border-color: var(--rosa-forte);
  }
  body.escuro .metodo-pagamento input:checked + label {
    background: var(--rosa-forte);
    border-color: var(--rosa-forte);
  }

  #btn-enviar {
    background: var(--verde);
    border: none;
    padding: 14px;
    border-radius: 20px;
    color: white;
    font-weight: 700;
    cursor: pointer;
    font-size: 1.1rem;
    width: 100%;
    transition: background-color 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  #btn-enviar:hover {
    background: var(--verde-escuro);
  }
  #btn-enviar:disabled {
    background: #999;
    cursor: not-allowed;
  }

  /* √çcone e contador carrinho compacto */
  #carrinho-flutuante.compacto .icone-carrinho {
    width: 70px;
    height: 70px;
    font-size: 32px;
    color: var(--rosa-forte);
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }

  #carrinho-flutuante.compacto .contador-itens {
    position: absolute;
    top: 8px;
    right: 8px;
    background: var(--azul-forte);
    color: white;
    width: 22px;
    height: 22px;
    font-size: 14px;
    border-radius: 50%;
    display: none;
    justify-content: center;
    align-items: center;
    font-weight: 700;
  }

  /* Exibir contador se >0 */
  #carrinho-flutuante.compacto .contador-itens.exibir {
    display: flex;
  }

  /* Bot√£o tema */
  #btn-tema {
    position: fixed;
    bottom: 20px;
    left: 20px;
    padding: 12px 16px;
    border: none;
    border-radius: 40px;
    background: var(--azul-forte);
    color: white;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(62, 161, 247, 0.5);
    z-index: 1100;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  #btn-tema:hover {
    background: var(--rosa-forte);
    transform: translateY(-2px);
  }

  /* Bot√£o voltar ao topo */
  #btn-topo {
    position: fixed;
    bottom: 90px;
    right: 20px;
    background: var(--rosa-forte);
    color: white;
    border: none;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(255, 105, 180, 0.6);
    display: none;
    z-index: 1100;
    transition: all 0.3s ease;
  }
  #btn-topo:hover {
    background: #ff1493;
    transform: translateY(-2px);
  }

  /* Feedback */
  #feedback {
    position: fixed;
    top: 80px;
    right: 30px;
    background: var(--azul-forte);
    color: white;
    padding: 12px 20px;
    border-radius: 12px;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 1200;
    font-weight: 600;
    user-select: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  body.escuro #feedback {
    background: var(--rosa-forte);
  }

  /* Modal de confirma√ß√£o */
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.7);
    z-index: 3000;
    justify-content: center;
    align-items: center;
  }

  .modal-conteudo {
    background: var(--branco);
    padding: 25px;
    border-radius: 20px;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    position: relative;
    animation: modalEntrada 0.4s ease;
  }
  body.escuro .modal-conteudo {
    background: #222;
  }

  @keyframes modalEntrada {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .modal-titulo {
    font-size: 1.8rem;
    color: var(--rosa-forte);
    margin-top: 0;
    margin-bottom: 20px;
    text-align: center;
  }
  body.escuro .modal-titulo {
    color: var(--azul-forte);
  }

  .modal-mensagem {
    font-size: 1.1rem;
    margin-bottom: 25px;
    text-align: center;
  }

  .modal-botoes {
    display: flex;
    justify-content: center;
    gap: 15px;
  }

  .modal-btn {
    padding: 12px 25px;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
  }

  .modal-btn-primario {
    background: var(--verde);
    color: white;
  }
  .modal-btn-primario:hover {
    background: var(--verde-escuro);
  }

  .modal-btn-secundario {
    background: #ddd;
    color: #333;
  }
  .modal-btn-secundario:hover {
    background: #ccc;
  }

  /* Anima√ß√µes especiais para os produtos */
  @keyframes fuma√ßa {
    0% {
      opacity: 0.6;
      transform: translateY(0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(-40px) scale(1.3);
    }
  }
  .fuma√ßa {
    width: 50px;
    height: 50px;
    background: radial-gradient(ellipse at center, rgba(255,255,255,0.6) 0%, transparent 70%);
    border-radius: 50%;
    animation: fuma√ßa 1.2s ease forwards;
    filter: blur(8px);
    pointer-events: none;
    position: fixed;
    z-index: 1500;
  }

  /* Brilho doce */
  @keyframes brilho {
    0%, 100% { filter: drop-shadow(0 0 0 white); }
    50% { filter: drop-shadow(0 0 8px #ff69b4); }
  }
  .brilho {
    animation: brilho 1s ease infinite;
  }

  /* Explos√£o batata */
  @keyframes explosao {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.3) rotate(5deg); opacity: 0.8;}
    100% { transform: scale(1) rotate(0deg); opacity: 1;}
  }
  .explosao {
    animation: explosao 0.5s ease forwards;
  }

  /* Confete */
  @keyframes confete {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
  }
  .confete {
    position: fixed;
    width: 10px;
    height: 10px;
    background: var(--rosa-forte);
    animation: confete 2s ease forwards;
    z-index: 2000;
  }
  body.escuro .confete {
    background: var(--azul-forte);
  }

  /* Responsividade */
  @media (max-width: 768px) {
    .lista-produtos {
      grid-template-columns: repeat(auto-fill,minmax(160px,1fr));
    }
    
    .destaques-container {
      height: 250px;
    }
    
    .slide-destaque h2 {
      font-size: 2rem;
    }
    
    #carrinho-flutuante {
      width: 280px;
    }
    
    header h1 {
      font-size: 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .lista-produtos {
      grid-template-columns: 1fr;
    }
    
    .destaques-container {
      height: 200px;
    }
    
    .slide-destaque h2 {
      font-size: 1.6rem;
    }
    
    .slide-destaque p {
      font-size: 1rem;
    }
    
    #carrinho-flutuante {
      width: 90%;
      right: 5%;
    }
  }
</style>
</head>
<body>

<header>
  <h1>üç∞ Dolce Maria</h1>
  <div id="status-loja">Verificando...</div>
</header>

<div class="container-principal">
  <!-- √Årea de destaques -->
  <div class="destaques-container">
    <button class="controle-slide" id="prev-slide">‚ùÆ</button>
    <div class="slides-destaque" id="slides-destaque"></div>
    <button class="controle-slide" id="next-slide">‚ùØ</button>
    <div class="indicadores-slide" id="indicadores-slide"></div>
  </div>

  <!-- √Årea de produtos -->
  <div class="produtos-area" id="produtos"></div>
</div>

<!-- Carrinho flutuante -->
<div id="carrinho-flutuante" class="compacto" title="Clique para abrir/fechar">
  <div class="icone-carrinho" aria-label="Carrinho de compras" role="button" tabindex="0">
    üõí
    <div class="contador-itens" aria-live="polite" aria-atomic="true">0</div>
  </div>
  <div class="conteudo-carrinho" style="display:none;">
    <h3>üõí Seu Carrinho</h3>
    <ul id="itens-carrinho"></ul>
    
    <div class="grupo-input">
      <label for="cupom-input">Cupom de desconto</label>
      <input type="text" id="cupom-input" placeholder="Ex: CUPOM123" />
      <small id="mensagem-cupom"></small>
    </div>
    
    <div class="grupo-input">
      <label>Forma de pagamento</label>
      <div class="metodo-pagamento">
        <input type="radio" id="pagamento-dinheiro" name="pagamento" value="dinheiro" checked>
        <label for="pagamento-dinheiro">Dinheiro</label>
        
        <input type="radio" id="pagamento-pix" name="pagamento" value="pix">
        <label for="pagamento-pix">PIX</label>
      </div>
    </div>
    
    <div class="grupo-input">
      <label for="bairro-input">Seu bairro</label>
      <select id="bairro-input">
        <option value="">Selecione seu bairro</option>
        <option value="Icurana">Icurana(R$ 3,00)</option>
        <option value="Vilar_carioca">Vilar carioca(R$ 5,00)</option>
        <option value="Inhoa√≠ba">Inhoa√≠ba(R$ 8,00)</option>
        <option value="Cosmos">Cosmos (R$ 10,00)</option>
      </select>
    </div>
    
    <div id="total-carrinho">Total: R$ 0,00</div>
    <button id="btn-enviar" disabled>üí¨ Enviar pedido via WhatsApp</button>
  </div>
</div>

<button id="btn-tema" aria-label="Alternar tema">üåì Tema</button>
<button id="btn-topo" aria-label="Voltar ao topo">üîù</button>

<div id="feedback" role="alert" aria-live="assertive"></div>

<!-- Modal de confirma√ß√£o -->
<div class="modal" id="modal-confirmacao">
  <div class="modal-conteudo">
    <h2 class="modal-titulo">Pedido Enviado!</h2>
    <p class="modal-mensagem">Seu pedido foi enviado com sucesso para o WhatsApp da Dolce Maria. Aguarde a confirma√ß√£o!</p>
    <div class="modal-botoes">
      <button class="modal-btn modal-btn-primario" id="btn-modal-ok">OK</button>
    </div>
  </div>
</div>

<script>
  // Dados dos produtos
  const produtos = {
    "Caf√© da Manh√£": [
      { nome: "Cappuccino", preco: 8.5, efeito: "fuma√ßa", descricao: "Caf√© cremoso com leite vaporizado e chocolate" },
      { nome: "Misto Quente", preco: 5.0, efeito: "brilho", descricao: "P√£o de forma com queijo e presunto gratinado" },
      { nome: "P√£o de Queijo", preco: 4.5, efeito: "brilho", descricao: "P√£o de queijo mineiro tradicional" },
      { nome: "Croissant", preco: 6.5, efeito: "brilho", descricao: "Croissant folhado com manteiga" },
      { nome: "Suco Natural", preco: 7.0, efeito: "brilho", descricao: "Suco de laranja, morango ou abacaxi" }
    ],
    "Doces e Caf√©s": [
      { nome: "Bolo de Morango", preco: 12.0, efeito: "brilho", descricao: "Bolo de morango com chantilly" },
      { nome: "Brownie", preco: 7.0, efeito: "brilho", descricao: "Brownie de chocolate com nozes" },
      { nome: "Caf√© Expresso", preco: 6.0, efeito: "fuma√ßa", descricao: "Caf√© expresso tradicional" },
      { nome: "Torta de Lim√£o", preco: 10.0, efeito: "brilho", descricao: "Torta de lim√£o com merengue" },
      { nome: "Cheesecake", preco: 14.0, efeito: "brilho", descricao: "Cheesecake de frutas vermelhas" }
    ],
    "Batatas Fritas": [
      { nome: "Batata Pequena", preco: 5.0, efeito: "explosao", descricao: "Por√ß√£o individual de batata frita" },
      { nome: "Batata M√©dia", preco: 8.0, efeito: "explosao", descricao: "Por√ß√£o para 2 pessoas" },
      { nome: "Batata Grande", preco: 12.0, efeito: "explosao", descricao: "Por√ß√£o fam√≠lia com molhos" },
      { nome: "Batata Especial", preco: 15.0, efeito: "explosao", descricao: "Batata com cheddar e bacon" },
      { nome: "Batata Doce", preco: 10.0, efeito: "explosao", descricao: "Por√ß√£o de batata doce frita" }
    ]
  };

  // Taxas de entrega por bairro
  const taxasEntrega = {
    "Icurana": 3.00,
    "vilar_carioca": 5.00,
    "Inhoa√≠ba": 8.00,
    "Cosmos": 10.00
  };

  // Cupons de desconto
  const cupons = {
    "DOLCE10": 0.10,  // 10% de desconto
    "BOLO3": 0.03     // 3% de desconto
  };

  // Dados para os slides de destaque
  const destaques = [
    {
      titulo: "Caf√© da Manh√£ Especial",
      descricao: "Comece seu dia com nossos deliciosos caf√©s e p√£es fresquinhos!",
      categoria: "Caf√© da Manh√£",
      corFundo: "linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)"
    },
    {
      titulo: "Doces Artesanais",
      descricao: "Nossos doces s√£o feitos com ingredientes selecionados e muito carinho!",
      categoria: "Doces e Caf√©s",
      corFundo: "linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)"
    },
    {
      titulo: "Batatas Crocantes",
      descricao: "As melhores batatas fritas da regi√£o, perfeitas para qualquer hora!",
      categoria: "Batatas Fritas",
      corFundo: "linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)"
    }
  ];

  let carrinho = [];
  let cupomAtivo = null;
  let slideAtual = 0;
  let intervaloSlides;
  let lojaAberta = false;

  // Inicializa√ß√£o
  window.onload = () => {
    verificarStatusLoja();
    renderizarDestaques();
    renderizarProdutos();
    iniciarSliderAutomatico();

    // Event listeners
    document.getElementById("btn-enviar").addEventListener("click", enviarPedidoWhatsApp);
    document.getElementById("btn-tema").addEventListener("click", alternarTema);
    document.getElementById("btn-topo").addEventListener("click", scrollParaTopo);
    document.getElementById("cupom-input").addEventListener("input", verificarCupom);
    document.getElementById("bairro-input").addEventListener("change", atualizarCarrinho);
    document.getElementById("prev-slide").addEventListener("click", () => mudarSlide(-1));
    document.getElementById("next-slide").addEventListener("click", () => mudarSlide(1));
    document.getElementById("btn-modal-ok").addEventListener("click", fecharModal);
    window.addEventListener("scroll", verificarBtnTopo);

    // Toggle carrinho
    const iconeCarrinho = document.querySelector(".icone-carrinho");
    iconeCarrinho.addEventListener("click", toggleCarrinho);
    iconeCarrinho.addEventListener("keypress", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        toggleCarrinho();
      }
    });
  };

  // Verificar status da loja
  function verificarStatusLoja() {
    // Loja aberta das 7h √†s 20h30
    const agora = new Date();
    const h = agora.getHours();
    const m = agora.getMinutes();
    lojaAberta = (h > 7 || (h === 00 && m >= 0)) && (h < 20 || (h === 20 && m <= 30));
    
    const status = document.getElementById("status-loja");
    if (lojaAberta) {
      status.textContent = "üü¢ Loja Aberta";
      status.classList.remove("fechado");
    } else {
      status.textContent = "üî¥ Loja Fechada - Obrigada pela prefer√™ncia!";
      status.classList.add("fechado");
    }
    
    // Atualiza bot√µes de adicionar
    document.querySelectorAll(".btn-adicionar").forEach(btn => {
      btn.disabled = !lojaAberta;
    });
    
    return lojaAberta;
  }

  // Renderizar slides de destaque
  function renderizarDestaques() {
    const slidesContainer = document.getElementById("slides-destaque");
    const indicadoresContainer = document.getElementById("indicadores-slide");
    
    slidesContainer.innerHTML = "";
    indicadoresContainer.innerHTML = "";
    
    destaques.forEach((destaque, index) => {
      // Criar slide
      const slide = document.createElement("div");
      slide.className = "slide-destaque";
      slide.style.background = destaque.corFundo;
      slide.innerHTML = `
        <h2>${destaque.titulo}</h2>
        <p>${destaque.descricao}</p>
      `;
      slidesContainer.appendChild(slide);
      
      // Criar indicador
      const indicador = document.createElement("div");
      indicador.className = "indicador";
      if (index === 0) indicador.classList.add("ativo");
      indicador.addEventListener("click", () => irParaSlide(index));
      indicadoresContainer.appendChild(indicador);
    });
    
    // Atualizar posi√ß√£o
    atualizarPosicaoSlides();
  }

  // Iniciar slider autom√°tico
  function iniciarSliderAutomatico() {
    clearInterval(intervaloSlides);
    intervaloSlides = setInterval(() => mudarSlide(1), 5000);
  }

  // Mudar slide
  function mudarSlide(direcao) {
    slideAtual += direcao;
    
    if (slideAtual < 0) {
      slideAtual = destaques.length - 1;
    } else if (slideAtual >= destaques.length) {
      slideAtual = 0;
    }
    
    atualizarPosicaoSlides();
    reiniciarIntervaloSlides();
  }

  // Ir para slide espec√≠fico
  function irParaSlide(index) {
    slideAtual = index;
    atualizarPosicaoSlides();
    reiniciarIntervaloSlides();
  }

  // Atualizar posi√ß√£o dos slides
  function atualizarPosicaoSlides() {
    const slidesContainer = document.getElementById("slides-destaque");
    const indicadores = document.querySelectorAll(".indicador");
    
    slidesContainer.style.transform = `translateX(-${slideAtual * 100}%)`;
    
    indicadores.forEach((indicador, index) => {
      if (index === slideAtual) {
        indicador.classList.add("ativo");
      } else {
        indicador.classList.remove("ativo");
      }
    });
  }

  // Reiniciar intervalo dos slides
  function reiniciarIntervaloSlides() {
    clearInterval(intervaloSlides);
    intervaloSlides = setInterval(() => mudarSlide(1), 5000);
  }

  // Renderizar produtos
  function renderizarProdutos() {
    const container = document.getElementById("produtos");
    container.innerHTML = "";
    
    // Destacar categoria atual baseada no hor√°rio
    const horaCat = horarioAtual();
    
    for (const categoria in produtos) {
      const catDiv = document.createElement("div");
      catDiv.className = "categoria";
      
      // Adicionar emoji de destaque se for a categoria do hor√°rio
      const destaque = categoria === horaCat ? "üåü " : "";
      const h2 = document.createElement("h2");
      h2.textContent = destaque + categoria;
      catDiv.appendChild(h2);
      
      const listaProdutos = document.createElement("div");
      listaProdutos.className = "lista-produtos";
      
      produtos[categoria].forEach(prod => {
        const prodDiv = document.createElement("div");
        prodDiv.className = `produto ${categoria === horaCat ? 'destaque' : ''}`;
        prodDiv.setAttribute('tabindex', '0');
        prodDiv.setAttribute('role', 'button');
        prodDiv.setAttribute('aria-pressed', 'false');
        prodDiv.innerHTML = `
          <strong>${prod.nome}</strong>
          <small>${prod.descricao}</small>
          <small>R$ ${prod.preco.toFixed(2)}</small>
          <button class="btn-adicionar" ${lojaAberta ? '' : 'disabled'} aria-label="Adicionar ${prod.nome} ao carrinho">Adicionar</button>
        `;
        
        // Evento clique no bot√£o
        const btn = prodDiv.querySelector('button');
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          adicionarAoCarrinho(prod, btn);
        });
        
        // Adicionar acessibilidade ao clicar na div
        prodDiv.addEventListener('keypress', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            adicionarAoCarrinho(prod, prodDiv.querySelector('button'));
          }
        });
        
        listaProdutos.appendChild(prodDiv);
      });
      
      catDiv.appendChild(listaProdutos);
      container.appendChild(catDiv);
    }
  }

  // Determinar categoria baseada no hor√°rio
  function horarioAtual() {
    const h = new Date().getHours();
    if (h >= 5 && h <= 10) return "Caf√© da Manh√£";
    if (h >= 11 && h <= 17) return "Doces e Caf√©s";
    return "Batatas Fritas";
  }

  // Criar efeitos visuais
  function criarEfeito(efeito, elemBotao) {
    if (!efeito) return;
    
    const rect = elemBotao.getBoundingClientRect();
    const efeitoDiv = document.createElement("div");
    efeitoDiv.className = efeito;
    efeitoDiv.style.position = "fixed";
    efeitoDiv.style.left = rect.left + rect.width / 2 - 25 + "px";
    efeitoDiv.style.top = rect.top - 50 + "px";
    efeitoDiv.style.pointerEvents = "none";
    document.body.appendChild(efeitoDiv);
    
    setTimeout(() => efeitoDiv.remove(), 1200);
  }

  // Adicionar item ao carrinho
  function adicionarAoCarrinho(prod, btn) {
    carrinho.push({ 
      nome: prod.nome, 
      preco: prod.preco,
      categoria: Object.keys(produtos).find(cat => produtos[cat].some(p => p.nome === prod.nome))
    });
    
    atualizarCarrinho();
    criarEfeito(prod.efeito, btn);
    mostrarFeedback(`‚úÖ ${prod.nome} adicionado!`);
    
    // Criar confetes para itens especiais
    if (prod.nome.includes("Especial") || prod.nome.includes("Bolo")) {
      criarConfetes(20);
    }
  }

  // Criar efeito de confete
  function criarConfetes(quantidade) {
    for (let i = 0; i < quantidade; i++) {
      const confete = document.createElement("div");
      confete.className = "confete";
      confete.style.left = Math.random() * 100 + "vw";
      confete.style.backgroundColor = getRandomColor();
      confete.style.animationDuration = (Math.random() * 2 + 1) + "s";
      document.body.appendChild(confete);
      
      setTimeout(() => confete.remove(), 2000);
    }
  }

  // Gerar cor aleat√≥ria para confetes
  function getRandomColor() {
    const colors = ["#ff69b4", "#3ea1f7", "#25d366", "#9c27b0", "#ff9800", "#e91e63"];
    return colors[Math.floor(Math.random() * colors.length)];
  }

  // Remover item do carrinho
  function removerDoCarrinho(index) {
    carrinho.splice(index, 1);
    atualizarCarrinho();
    mostrarFeedback("‚ùå Item removido do carrinho");
  }

  // Atualizar carrinho
  function atualizarCarrinho() {
    const lista = document.getElementById("itens-carrinho");
    const totalEl = document.getElementById("total-carrinho");
    const contador = document.querySelector("#carrinho-flutuante .contador-itens");
    const bairroSelecionado = document.getElementById("bairro-input").value;
    const taxaEntrega = bairroSelecionado ? taxasEntrega[bairroSelecionado] || 0 : 0;

    lista.innerHTML = "";
    let subtotal = 0;

    // Adicionar itens ao carrinho
    carrinho.forEach((item, index) => {
      subtotal += item.preco;
      
      const li = document.createElement("li");
      li.innerHTML = `
        <span>${item.nome} - R$ ${item.preco.toFixed(2)}</span>
        <button class="remover-item" aria-label="Remover ${item.nome} do carrinho" title="Remover">‚úï</button>
      `;
      
      li.querySelector(".remover-item").addEventListener("click", () => removerDoCarrinho(index));
      lista.appendChild(li);
    });

    // Calcular desconto
    let desconto = 0;
    if (cupomAtivo) {
      desconto = subtotal * cupomAtivo.valor;
    }

    // Calcular total
    const total = subtotal - desconto + taxaEntrega;

    // Atualizar exibi√ß√£o
    if (cupomAtivo) {
      totalEl.innerHTML = `
        Subtotal: R$ ${subtotal.toFixed(2)}<br>
        Desconto (${cupomAtivo.codigo}): -R$ ${desconto.toFixed(2)}<br>
        ${taxaEntrega > 0 ? `Taxa de entrega: R$ ${taxaEntrega.toFixed(2)}<br>` : ''}
        <strong>Total: R$ ${total.toFixed(2)}</strong>
      `;
    } else {
      totalEl.innerHTML = `
        Subtotal: R$ ${subtotal.toFixed(2)}<br>
        ${taxaEntrega > 0 ? `Taxa de entrega: R$ ${taxaEntrega.toFixed(2)}<br>` : ''}
        <strong>Total: R$ ${total.toFixed(2)}</strong>
      `;
    }

    // Atualizar bot√£o de envio
    document.getElementById("btn-enviar").disabled = carrinho.length === 0 || !bairroSelecionado;

    // Atualizar contador no √≠cone do carrinho
    if (carrinho.length > 0) {
      contador.textContent = carrinho.length;
      contador.classList.add("exibir");
    } else {
      contador.textContent = "0";
      contador.classList.remove("exibir");
    }
  }

  // Verificar cupom
  function verificarCupom() {
    const cupomInput = document.getElementById("cupom-input").value.trim().toUpperCase();
    const mensagemCupom = document.getElementById("mensagem-cupom");
    
    if (cupomInput in cupons) {
      cupomAtivo = {
        codigo: cupomInput,
        valor: cupons[cupomInput]
      };
      mensagemCupom.textContent = `üéâ Cupom ${cupomInput} aplicado! ${cupons[cupomInput] * 100}% de desconto`;
      mensagemCupom.style.color = "#25d366";
    } else if (cupomInput === "") {
      cupomAtivo = null;
      mensagemCupom.textContent = "";
    } else {
      cupomAtivo = null;
      mensagemCupom.textContent = "‚ùå Cupom inv√°lido";
      mensagemCupom.style.color = "#ff4444";
    }
    
    atualizarCarrinho();
  }

  // Enviar pedido por WhatsApp
  function enviarPedidoWhatsApp() {
    if (carrinho.length === 0) {
      mostrarFeedback("‚ùå Seu carrinho est√° vazio!");
      return;
    }
    
    const bairro = document.getElementById("bairro-input").value;
    if (!bairro) {
      mostrarFeedback("‚ùå Selecione seu bairro!");
      return;
    }
    
    const metodoPagamento = document.querySelector('input[name="pagamento"]:checked').value;
    const taxaEntrega = taxasEntrega[bairro] || 0;
    
    let subtotal = 0;
    carrinho.forEach(item => subtotal += item.preco);
    
    let desconto = 0;
    if (cupomAtivo) {
      desconto = subtotal * cupomAtivo.valor;
    }
    
    const total = subtotal - desconto + taxaEntrega;
    
    // Criar mensagem
    let mensagem = "*üç∞ PEDIDO DOLCE MARIA üç∞*\n\n";
    mensagem += "*Itens:*\n";
    
    // Agrupar itens por categoria
    const itensPorCategoria = {};
    carrinho.forEach(item => {
      if (!itensPorCategoria[item.categoria]) {
        itensPorCategoria[item.categoria] = [];
      }
      itensPorCategoria[item.categoria].push(item);
    });
    
    // Adicionar itens √† mensagem por categoria
    for (const categoria in itensPorCategoria) {
      mensagem += `\n*${categoria}:*\n`;
      itensPorCategoria[categoria].forEach(item => {
        mensagem += `- ${item.nome} - R$ ${item.preco.toFixed(2)}\n`;
      });
    }
    
    mensagem += "\n*Resumo do Pedido:*\n";
    mensagem += `Subtotal: R$ ${subtotal.toFixed(2)}\n`;
    
    if (cupomAtivo) {
      mensagem += `Desconto (${cupomAtivo.codigo}): -R$ ${desconto.toFixed(2)}\n`;
    }
    
    mensagem += `Taxa de entrega: R$ ${taxaEntrega.toFixed(2)}\n`;
    mensagem += `*Total: R$ ${total.toFixed(2)}*\n\n`;
    mensagem += `*Forma de pagamento:* ${metodoPagamento === 'dinheiro' ? 'Dinheiro' : 'PIX'}\n`;
    mensagem += `*Bairro:* ${document.getElementById("bairro-input").options[document.getElementById("bairro-input").selectedIndex].text}\n\n`;
    mensagem += "Aguardo confirma√ß√£o! üíñ";
    
    // N√∫mero do WhatsApp (substitua pelo seu n√∫mero real)
    const numero = "5521970372440";
    const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;
    
    // Abrir WhatsApp
    window.open(url, "_blank");
    
    // Mostrar confirma√ß√£o
    mostrarModalConfirmacao();
    
    // Limpar carrinho ap√≥s envio
    carrinho = [];
    cupomAtivo = null;
    document.getElementById("cupom-input").value = "";
    document.getElementById("mensagem-cupom").textContent = "";
    document.getElementById("bairro-input").value = "";
    atualizarCarrinho();
    
    // Criar confetes
    criarConfetes(50);
  }

  // Mostrar modal de confirma√ß√£o
  function mostrarModalConfirmacao() {
    const modal = document.getElementById("modal-confirmacao");
    modal.style.display = "flex";
  }

  // Fechar modal
  function fecharModal() {
    const modal = document.getElementById("modal-confirmacao");
    modal.style.display = "none";
  }

  // Mostrar feedback
  function mostrarFeedback(msg) {
    const feedback = document.getElementById("feedback");
    feedback.innerHTML = msg;
    feedback.style.opacity = 1;
    
    setTimeout(() => {
      feedback.style.opacity = 0;
    }, 3000);
  }

  // Alternar tema claro/escuro
  function alternarTema() {
    document.body.classList.toggle("escuro");
    
    // Atualizar texto do bot√£o
    const btnTema = document.getElementById("btn-tema");
    if (document.body.classList.contains("escuro")) {
      btnTema.innerHTML = "üåû Tema";
    } else {
      btnTema.innerHTML = "üåì Tema";
    }
  }

  // Scroll para o topo
  function scrollParaTopo() {
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  // Verificar se deve mostrar bot√£o de voltar ao topo
  function verificarBtnTopo() {
    const btn = document.getElementById("btn-topo");
    if (window.scrollY > 250) btn.style.display = "block";
    else btn.style.display = "none";
  }

  // Toggle carrinho compacto/expandido
  function toggleCarrinho() {
    const carrinhoFlutuante = document.getElementById("carrinho-flutuante");
    const conteudoCarrinho = carrinhoFlutuante.querySelector(".conteudo-carrinho");
    
    if (carrinhoFlutuante.classList.contains("compacto")) {
      carrinhoFlutuante.classList.remove("compacto");
      conteudoCarrinho.style.display = "block";
      carrinhoFlutuante.style.width = "320px";
      carrinhoFlutuante.style.height = "auto";
    } else {
      carrinhoFlutuante.classList.add("compacto");
      conteudoCarrinho.style.display = "none";
      carrinhoFlutuante.style.width = "70px";
      carrinhoFlutuante.style.height = "70px";
    }
  }
</script>

</body>
</html>